# Refactoring

### ê¸°ì´í•œ ì´ë¦„
- ì½”ë“œëŠ” ë‹¨ìˆœí•˜ê³  ëª…ë£Œí•˜ê²Œ ì‘ì„±í•´ì•¼í•œë‹¤.
- ì½”ë“œë¥¼ ëª…ë£Œí•˜ê²Œ í‘œí•œí•˜ëŠ”ë° ê°€ì¥ ì¤‘ìš”í•œ ìš”ì†ŒëŠ” ë°”ë¡œ `ì´ë¦„`ì´ë‹¤.
- ì´ë¦„ë§Œ ì˜ ì§€ì–´ë„ ë¬¸ë°±ì„ íŒŒì•…í•˜ëŠë¼ í—¤ë§¤ëŠ” ì‹œê°„ì„ í¬ê²Œ ì ˆì•½ í•  ìˆ˜ ìˆë‹¤.

### ì¤‘ë³µ ì½”ë“œ
- ë˜‘ê°™ì€ ì½”ë“œ êµ¬ì¡°ê°€ ì—¬ëŸ¬ ê³³ì—ì„œ ë²ˆë³µ ëœë‹¤ë©´ í•˜ë‚˜ë¡œ í†µí•©í˜€ì•¼ ë” ë‚˜ì€ í”„ë¡œê·¸ë¨ì„ ë§Œë“¤ ìˆ˜ ìˆë‹¤
  - ê°™ì€ ì½”ë“œê°€ 3ë²ˆ ì´ìƒ ë°˜ë³µ ë˜ë©´ ê·¸ ì½”ë“œëŠ” í•˜ë‚˜ì˜ ë©”ì„œë“œë¡œ ë§Œë“¤ì–´ ì‚¬ìš©í•´ì£¼ì
- í•œ í´ë˜ìŠ¤ì— ë”¸ë¦° ë‘ ë©”ì„œë“œê°€ ë˜‘ê°™ì€ í‘œí˜„ì‹ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš° `í•¨ìˆ˜ ì¶”ì¶œí•˜ê¸°`ë¥¼ ì¨ì„œ ì–‘ìª½ ëª¨ë‘ ì¶”ì¶œëœ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ê²Œ ë°”ê¾¸ì
- ì½”ë“œê°€ ë¹„ìŠ·í•˜ê¸´ í•œë° ì™„ì „íˆ ë˜‘ê°™ì§€ ì•Šë‹¤ë©´ `ë¬¸ì¥ ìŠ¬ë¼ì´ë“œí•˜ê¸°`ë¡œ ë¹„ìŠ·í•œ ë¶€ë¶„ì„ í•œê³³ì— ëª¨ì•„ í•¨ìˆ˜ ì¶”ì¶œí•˜ê¸°ë¥¼ ë” ì‰½ê²Œ ì ìš©í•  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•´ ë³´ì

### ê¸´ í•¨ìˆ˜
- ì˜¤ëœ ê¸°ê°„ ì˜ í™œìš©ë ëŠ” í”„ë¡œê·¸ë¨ë“¤ì˜ ì½”ë“œ ë“¤ì€ í•˜ë‚˜ ê°™ì´ `ì§§ì€ í•¨ìˆ˜`ë¡œ êµ¬ì„±ë˜ì–´ ìˆë‹¤.
  - ë‚´ë¶€ ë¡œì§ì—ëŠ” ì—°ì‚°í•˜ëŠ” ë¶€ë¶„ì´ í•˜ë‚˜ë„ ì—†ì–´ ë³´ì¸ë‹¤.
    - ì½”ë“œê°€ ë ì—†ì´ ìœ„ì„ í•˜ëŠ” ë°©ì‹œê¸ë¡œ ì‘ì„±ë˜ì–´ ìˆê¸° ë–„ë¬¸ì´ë‹¤.
- `ê°„ì ‘ í˜¸ì¶œì˜ íš¨ê³¼` : ì½”ë“œë¥¼ ì´í•´, ê³µìœ , ì„ íƒí•˜ê¸° ì‰¬ì›Œì§„ë‹¤ëŠ” ì¥ì ‘ì€ ì¥ì ì€ í•¨ìˆ˜ë¥¼ ì§§ê²Œ êµ¬ì„±í•  ë–„ ë‚˜ì˜¤ëŠ” ê²ƒì´ë‹¤.
- ì—¬ê¸°ì„œë„ ì§§ì€ í•¨ìˆ˜ë¡œ êµ¬ì„±ëœ ì½”ë“œë¥¼ ì´í•´í•˜ê¸° ì‰½ê²Œ ë§Œë“œëŠ” ê°€ì¥ ì‰½ê³  í™•ì‹¤í•œ ë°©ë²•ì€ `ì´ë¦„ì„ ì˜ ì§€ì–´ë‘ê¸°`ì´ë‹¤.
  - í•¨ìˆ˜ ì´ë¦„ì€ ë™ì¥ ë°©ì‹ì´ ì•„ë‹Œ `ì˜ë„`ê°€ ì˜ë“¤ì–´ë‚˜ê²Œ ì§€ì–´ì•¼í•œë‹¤.
- ì›ë˜ ì½”ë“œë³´ë‹¤ ê¸¸ì–´ì§€ë„ë¼ë„ í•¨ìˆ˜ ë‹¨ìœ„ë¡œ `ìª¼ê°œ`ì–´ì„œ êµ¬í˜„ í›„ ì˜ë„ì— ë§ê²Œ ì´ë¦„ì„ ì§€ì–´ ì£¼ì.
- í•¨ìˆ˜ë¥¼ ì§§ê²Œ ë§Œë“œëŠ” ì‘ì—…ì˜ 99%ëŠ” `í•¨ìˆ˜ ì¶”ì¶œí•˜ê¸°`ì´ë‹¤.
  - í•¨ìˆ˜ ë³¸ë¬¸ì—ì„œ ë”°ë¡œ ë¬¶ì–´ì„œ ëº´ë‚¼ ìˆ˜ ìˆëŠ” ì½”ë“œ ë©ì–´ë¦¬ë¥¼ ì°¾ì•„ `ìƒˆë¡œìš´ í•¨ìˆ˜ë¥¼ ë§Œë“œ`ëŠ” ê²ƒì´ë‹¤.
- ë¦¬íŒ©í† ë§ ëŒ€ìƒì˜ í•¨ìˆ˜ê°€ ë§¤ê°œë³€ìˆ˜ì™€ ì„ì‹œ ë³€ìˆ˜ë¥¼ ë§ì´ ì‚¬ìš©í•œë‹¤ë©´ í•¨ìˆ˜ë¥¼ ì¶”ì¶œí•˜ëŠ”ë° ì–´ë ¤ìš¸ ìˆ˜ ìˆëŠ”ë° ì´ëŸ´ ë• `ë§¤ê°œë³€ìˆ˜ë¥¼ ê°ì²´ë¡œ ë§Œë“¤ê¸°` ì™€ `ê·¸ ê°ì²´ í†µì¨°ë¡œ ë„˜ê¸°ê¸°`ë¥¼ ì‚¬ìš©í•˜ì
- ì¶”ì¶œí•  ì½”ë“œ ë©ì–´ë¦¬ ì°¾ëŠ” ë°©ë²•ì€?
  - ì£¼ì„ì„ ìœ„ì£¼ë¡œ ì°¾ì `ì£¼ì„ì´ ë‹¬ë ¤ìˆëŠ” ì½”ë“œëŠ”` ì½”ë“œë§Œìœ¼ë¡œ ì´í•´í•˜ê¸° ì–´ë µê¸°ì— ë‹¬ë ¤ìˆì„ í™•ë¥ ì´ ë†’ê¸° ë–„ë¬¸ì´ë‹¤.
    - ì£¼ì„ì„ ê¸°ì¤€ìœ¼ë¡œ ë§Œë“¤ì–´ì§„ ë©”ì„œë“œì˜ ê²½ìš° ë©”ì„œë“œ ëª…ì€ ì£¼ì„ëª…ì„ ê¸°ë°˜ìœ¼ë¡œ ì‘ì„±í•´ì£¼ì.
    - ì½”ë“œê°€ ë‹¨ í•œì¤„ì¼ ê²½ìš°ì—ë„ ì„¤ëª…í•  í•„ìš”ê°€ ìˆë‹¤ë©´ í•¨ìˆ˜ë¡œ ì¶”ì¶œí•˜ëŠ” ê²Œ ì¢‹ë‹¤.
  - ì¡°ê±´ë¬¸ì´ë‚˜ ë°˜ë³µë¬¸ì˜ ê²½ìš°ì—ë„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
    - switchë¬¸
      - ê±°ëŒ€í•œ switchì˜ ê²½ìš° caseë¬¸ ë§ˆë‹¤ `í•¨ìˆ˜ë¥¼ ì¶”ì¶œ`ì„ ì ìš©í•´ì„œ ê° caseì˜ ë³¸ë¬¸ì„ í•¨ìˆ˜ í˜¸ì¶œë¬¸ í•˜ë‚˜ë¡œ ë³€ê²½ í•œë‹¤.
      - ê°™ì€ ì¡°ê±´ì„ ê¸°ì¤€ìœ¼ë¡œ ë‚˜ë‰˜ëŠ” switchë¬¸ì´ ì—¬ëŸ¬ ê°œë¼ë©´ `ì¡°ê±´ë¶€ ë¡œì§ì„ ë‹¤í˜•ì„±`ìœ¼ë¡œ ë°”ê¿”ì£¼ì.
    - ë°˜ë³µë¬¸
      - ë°˜ë³µë¬¸ ë‚´ë¶€ì˜ ë¡œì§ì´ ê¸¸ì–´ ì§„ë‹¤ë©´ ë…ë¦½ëœ í•¨ìˆ˜ë¡œ ì¶”ì¶œí•˜ì—¬ ìƒì„±í•œë‹¤.


### ê¸´ ë§¤ê°œë³€ìˆ˜ ëª©ë¡
- ë§¤ê°œë³€ìˆ˜ ëª©ë¡ì´ ê¸¸ì–´ì§€ë©´ ê·¸ ìì²´ë¡œ ì´í•´í•˜ê°€ ì–´ë ¤ìš°ë¯€ë¡œ ë¦¬íŒ°í† ë§ í•´ì¤„ í•„ìš”ê°€ ìˆë‹¤.
- ë‹¤ë¥¸ ë§¤ê°œ ë³€ìˆ˜ì—ì„œ ê°’ì„ ì–»ì–´ ì™€ì•¼í•˜ëŠ” ë§¤ê°œ ë³€ìˆ˜ê°€ ìˆëŠ”ë° ì´ëŸ° ê²½ìš° `ë§¤ê°œë³€ìˆ˜ë¥¼ ì§ˆì˜ í•¨ìˆ˜ ë°”ê¾¸ê¸°`ë¡œ ì œê±° í•  ìˆ˜ ìˆë‹¤.
```javscript
// ğŸ‘ ì›ë˜ ì½”ë“œ
class ComedyCalculator extends PerformanceCalculator {
  get amount() {
    let result = 30000;
    if (this.performance.audience > 20) {
      result += 10000 + 500 * (this.performance.audience - 20);
    }
    result += 300 * this.performance.audience;
    return result;
  }
}

/*************************************************************************************/
/*************************************************************************************/
/*************************************************************************************/

// ğŸ‘ ë§¤ê°œë³€ìˆ˜ë¥¼ ì§ˆì˜ í•¨ìˆ˜ë¡œ ë°”ê¿ˆ 
class ComedyCalculator extends PerformanceCalculator {
  get amount() {
    return 30000 + this.bonusAmount;
  }

  get bonusAmount() {
    return this.overThresholdAmount + this.perAudienceAmount;
  }

  get overThresholdAmount() {
   // ğŸ‘‰ if (this.performance.audience > 20) ëŒ€ì²´ ê°€ëŠ¥ ì´ìœ ëŠ” 20 ë³´ë‹¤ í°ì§€ í™•ì¸ í•˜ëŠ” ê²ƒì´ê¸° ë–„ë¬¸ ìƒê°í•´ë³´ë©´ ë‹¹ì—°í•œê²ƒ !
    return Math.max(this.performance.audience - 20, 0) * 500;
  }

  get perAudienceAmount() {
    return 300 * this.performance.audience;
  }
}
```
- ì‚¬ìš© ì¤‘ì¸ ë°ì´í„° êµ¬ì¡°ì—ì„œ ê°’ë“¤ì„ ë½‘ì•„ì„œ ê°ê°€ì˜ ë³„ê°œì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ì „ë‹¬í•˜ëŠ” ì½”ë“œë¼ë©´ `ê°ì²´ í†µì§¸ë¡œ ë„˜ê¸°ê¸°`ë¥¼ ì ìš©í•´ì„œ ì›ë³¸ ë°ì´í„° êµ¬ì¡°ë¥¼ ê·¸ëŒ€ë¡œ ì „ë‹¬í•œë‹¤.
- í•­ìƒ í•¨ê»˜ ì „ë‹¬ë˜ëŠ” ë§¤ê°œë³€ìˆ˜ë“¤ì˜ ê·¸ë£¹ì´ ìˆë‹¤ë©´ í•´ëŒ• ëª©ë¡ì˜ ë³€ìˆ˜ë“¤ì„ `ë§¤ê°œë³€ìˆ˜ ê°ì²´ ë§Œë“¤ê¸°`ë¥¼ ì‚¬ìš©í•´ì£¼ì
- í•¨ìˆ˜ì˜ ë™ì¥ ë°©ì‹ì„ ì •í•˜ëŠ” í”Œë˜ê·¸ ì—­í• ì˜ ë§¤ê°œë³€ìˆ˜ëŠ” `í”Œë˜ê·¸ ì¸ìˆ˜ ì œê±°í•˜ê¸°`ë¡œ ì—†ì• ì¤€ë‹¤.
  - ì½”ë“œë¥¼ ì´í•´í•˜ê¸° ì–´ë ¤ì›Œì§€ê¸° ë•Œë¬¸ ì´ëŸ´ ê²½ìš° ë©”ì„œë“œë¥¼ `2ê°œë¡œ ë‚˜ëˆ ì„œ` ì‚¬ìš©í•´ì£¼ëŠ”ê²ƒì´ ë”ìš± ê°€ë…ì„±ì´ ë†’ë””.
```javascript
// ğŸ‘ ì›ë˜ ì½”ë“œ
function calculateTotal(amount, applyDiscount) {
  if (applyDiscount) {
    // í• ì¸ì„ ì ìš©í•˜ëŠ” ë¡œì§
    return amount * 0.9;
  } else {
    return amount;
  }
}
        
/*************************************************************************************/
/*************************************************************************************/
/*************************************************************************************/

// ğŸ‘ ë©”ì„œë“œë¥¼ ë¶„ë¦¬í•¨
function calculateTotalWithoutDiscount(amount) {
  return amount;
}

function calculateTotalWithDiscount(amount) {
  return amount * 0.9;
}
```
- í´ë˜ìŠ¤ë¥¼ í™œìš© í•˜ëŠ” ê²ƒë„ ë§¤ê°œë³€ìˆ˜ ëª©ë¡ì„ ì¤„ì´ëŠ”ë° íš¨ì ì¸ ìˆ˜ë‹¨ì´ë‹¤.
  - ì—¬ëŸ¬ ê°œì˜ í•¨ìˆ˜ê°€ íŠ¹ì • ë§¤ê°œë³€ìˆ˜ë“¤ì˜ ê°’ì„ ê³µí†µì ìœ¼ë¡œ ì‚¬ìš©í•  ê²½ìš° `ì—¬ëŸ¬ í•¨ìˆ˜ë¥¼ í´ë˜ìŠ¤ë¡œ ë¬¶ì–´` ì‚¬ìš©í•´ ì£¼ì.
```javascript
// ğŸ‘ ì›ë˜ ì½”ë“œ
function calculateTotalWithDiscount(amount, applyDiscount) {
  let total = amount;
  if (applyDiscount) {
    total *= 0.9;
  }
  return total;
}

function calculateTax(amount, taxRate) {
  return amount * (taxRate / 100);
}

function calculateFinalPrice(amount, applyDiscount, taxRate) {
  const total = calculateTotalWithDiscount(amount, applyDiscount);
  const tax = calculateTax(total, taxRate);
  return total + tax;
}
        
/*************************************************************************************/
/*************************************************************************************/
/*************************************************************************************/

// ğŸ‘ PricingCalculator í´ë˜ìŠ¤ë¡œ ë¬¶ì–´ ìƒì„±ìë“¤ í†µí•´ ì£¼ì… ë°›ì•„ ì‚¬ìš©í•¨
class PricingCalculator {
  constructor(amount, applyDiscount, taxRate) {
    this.amount = amount;
    this.applyDiscount = applyDiscount;
    this.taxRate = taxRate;
  }

  calculateTotalWithDiscount() {
    let total = this.amount;
    if (this.applyDiscount) {
      total *= 0.9;
    }
    return total;
  }

  calculateTax() {
    return this.amount * (this.taxRate / 100);
  }

  calculateFinalPrice() {
    const total = this.calculateTotalWithDiscount();
    const tax = this.calculateTax();
    return total + tax;
  }
}
```